<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Steam Roulette</title>
    <style>
        #bg-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        body { 
            background: #1b2838; 
            color: white; 
            font-family: 'Motiva Sans', Sans-serif; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 40px 0; 
            margin: 0; 
            min-height: 100vh;
            overflow: hidden;
        }

        #winner-display { 
            font-size: 28px; 
            font-weight: bold; 
            margin-bottom: 30px; 
            color: #66c0f4; 
            height: 40px; 
            text-align: center;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .roulette-wrapper { 
            position: relative; 
            width: 850px; 
            height: 160px; 
            border: 2px solid #2a475e; 
            overflow: hidden; 
            background: #000;
            border-radius: 8px; 
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }

        .pointer { 
            position: absolute; 
            left: 50%; 
            transform: translateX(-50%); 
            width: 4px; 
            height: 100%; 
            background: #ff4747; 
            z-index: 10; 
            box-shadow: 0 0 15px #ff4747; 
        }

        .track { display: flex; align-items: center; height: 100%; will-change: transform; }

        .item { 
            width: 250px; 
            height: 124px; 
            margin: 0 5px; 
            flex-shrink: 0; 
            background: #16202d; 
            border-bottom: 5px solid; 
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: box-shadow 0.6s ease;
        }

        .trash { border-color: #4b4b4b; color: #4b4b4b; }
        .common { border-color: #ffffff; color: #ffffff; }
        .uncommon { border-color: #32cd32; color: #32cd32; }
        .rare { border-color: #4b69ff; color: #4b69ff; }
        .epic { border-color: #8847ff; color: #8847ff; }
        .legendary { border-color: #caab05; color: #caab05; }
        .mythic { border-color: #eb4b4b; color: #eb4b4b; }
		.godly { border-color: #40e0d0; color: #40e0d0; }

        .item img { width: 100%; height: 100%; object-fit: contain; pointer-events: none; }

        @keyframes itemAppear {
            from { opacity: 0; transform: translateY(20px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .item-animate {
            animation: itemAppear 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            opacity: 0;
        }

        @keyframes wonPulse {
            0% { transform: scale(1); box-shadow: 0 0 20px currentColor; }
            50% { transform: scale(1.05); box-shadow: 0 0 50px currentColor; }
            100% { transform: scale(1); box-shadow: 0 0 20px currentColor; }
        }
        .item.won {
            z-index: 100;
            position: relative;
            border-width: 3px;
            animation: wonPulse 2s infinite ease-in-out;
            filter: brightness(1.2);
        }

        .controls { display: flex; gap: 15px; margin-top: 35px; }
        button { padding: 15px 35px; border: none; color: white; cursor: pointer; font-size: 18px; border-radius: 4px; font-weight: bold; transition: 0.2s; }
        #spin-btn { background: linear-gradient(to bottom, #a4d015 5%, #4b6b22 100%); }
        #spin-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        #launch-btn { background: #66c0f4; color: #1b2838; display: none; }
        #clear-btn { background: #3d4450; font-size: 14px; opacity: 0.6; }

        .history { margin-top: 50px; width: 850px; border-top: 1px solid #2a475e; padding-top: 20px; }
        .history h3 { color: #8f98a0; font-size: 14px; text-transform: uppercase; margin-bottom: 15px; }
        #history-list { display: flex; flex-wrap: wrap-reverse; gap: 10px; list-style: none; padding: 0; }
        .history-item { padding: 6px 14px; background: #233c51; border-radius: 4px; font-size: 12px; border-left: 4px solid; }

        .stats-footer { 
            margin-top: 50px; 
            padding: 20px; 
            background: rgba(0,0,0,0.3); 
            border-radius: 8px; 
            width: 810px;
            font-size: 13px;
        }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; }
        .stat-line { color: #8f98a0; }
        .stat-line b { color: white; }

        .library-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(10, 15, 23, 0.98);
            z-index: 1000;
            display: none;
            overflow-y: auto;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .library-overlay::-webkit-scrollbar { display: none; }

        .library-content {
            width: 95%;
            max-width: 1600px;
            margin: 40px auto;
            padding: 20px;
        }

        .library-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #2a475e;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }

        .library-grid { 
            display: grid; 
            grid-template-columns: repeat(7, 1fr); 
            gap: 15px; 
            padding: 20px;
            justify-content: center;
        }

        .lib-card { 
            width: 100%; 
            height: auto; 
            aspect-ratio: 250 / 124; 
            background: #16202d; 
            border-bottom: 5px solid; 
            cursor: pointer; 
            transition: 0.3s; 
        }

        .lib-card:hover { 
            transform: scale(1.08); 
            box-shadow: 0 0 30px currentColor; 
            z-index: 10; 
            filter: brightness(1.2);
        }
        .lib-card img { width: 100%; height: 100%; object-fit: cover; }

        .lib-nav-arrow {
            position: fixed;
            font-size: 40px;
            color: #66c0f4;
            text-shadow: 0 0 15px rgba(102, 192, 244, 0.8);
            pointer-events: none;
            opacity: 0.4;
            z-index: 1001;
            transition: opacity 0.3s;
            animation: arrowBounce 2s infinite ease-in-out;
        }

        .top-left { top: 100px; left: 30px; }
        .top-right { top: 100px; right: 30px; }
        .bot-left { bottom: 50px; left: 30px; opacity: 0; }
        .bot-right { bottom: 50px; right: 30px; opacity: 0; }

        @keyframes arrowBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(10px); }
        }

        @keyframes slideIn {
            from { transform: translateX(120%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(120%); opacity: 0; }
        }

        .ach-card { 
            background: #233c51; 
            padding: 15px; 
            border-radius: 8px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            text-align: center;
            border: 2px solid #2a475e; 
            opacity: 0.3; 
            filter: grayscale(1); 
            transition: 0.3s;
        }

        .ach-card.unlocked { 
            opacity: 1; 
            filter: grayscale(0); 
            border-color: #caab05; 
            box-shadow: 0 0 15px rgba(202, 171, 5, 0.3);
        }

        .ach-icon { font-size: 30px; margin-bottom: 10px; }
        .ach-title { color: #66c0f4; font-weight: bold; font-size: 13px; }
        .ach-desc { color: #8f98a0; font-size: 11px; margin-top: 5px; }
    </style>
</head>
<body>
    <canvas id="bg-canvas"></canvas>
    <div id="winner-display">–í–´–ë–ï–†–ò–¢–ï JSON –§–ê–ô–õ –° –ò–ì–†–ê–ú–ò</div>

    <div class="roulette-wrapper" id="roulette-box">
        <div class="pointer"></div>
        <div id="track" class="track"></div>
    </div>

    <div class="controls">
        <button id="spin-btn" onclick="spin()" disabled>–ö—Ä—É—Ç–∏—Ç—å</button>
        <button id="launch-btn" onclick="launchGame()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É</button>
        <button id="lib-btn" onclick="toggleLibrary(true)" style="background: #2a475e; display: none;">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</button>
        <button id="ach-btn" onclick="toggleAchievements(true)" style="background: #4b6b22; display: none;">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
        <input type="file" id="file-selector" style="display: none;" accept=".json" onchange="handleManualUpload(event)">
        <button id="upload-btn" onclick="document.getElementById('file-selector').click()" style="background: #3d4450;">–ó–∞–≥—Ä—É–∑–∏—Ç—å JSON</button>
        <button id="clear-btn" onclick="clearHistory()">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
		<span id="app-version" style="margin-left: auto; color: #4e697d; font-size: 12px; font-family: monospace; align-self: center; padding-left: 20px;"></span>
    </div>

    <div id="achievements-overlay" class="library-overlay">
        <div class="library-content">
            <div class="library-header">
                <h2 style="color: #caab05; margin: 0;">üèÜ –ú–û–ò –î–û–°–¢–ò–ñ–ï–ù–ò–Ø (<span id="ach-count">0</span>/21)</h2>
                <button onclick="toggleAchievements(false)" style="background:none; color:white; border:none; font-size: 35px; cursor:pointer;">‚úï</button>
				<button onclick="fullReset()" style="background: #eb4b4b; font-size: 12px; margin-left: 20px;">–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë</button>
            </div>
            <div id="achievements-grid" class="library-grid"></div>
        </div>
    </div>

    <div class="history">
        <h3>–ò—Å—Ç–æ—Ä–∏—è:</h3>
        <ul id="history-list"></ul>
    </div>

    <div class="stats-footer">
        <div style="border-bottom: 1px solid #2a475e; padding-bottom: 10px; margin-bottom: 10px;">
            <b>–ë–ò–ë–õ–ò–û–¢–ï–ö–ê:</b> <span id="game-count">0</span> –∏–≥—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–æ
        </div>
        <div class="stats-grid" id="chance-stats"></div>
    </div>

    <div id="library-overlay" class="library-overlay">
        <div class="library-content">
            <div class="library-header">
                <h2 style="color: #66c0f4; margin: 0;">–ë–ò–ë–õ–ò–û–¢–ï–ö–ê –ò–ì–† (<span id="lib-count">0</span>)</h2>
                <button onclick="toggleLibrary(false)" style="background:none; color:white; border:none; font-size: 35px; cursor:pointer;">‚úï</button>
            </div>
            <div id="library-grid" class="library-grid"></div>
        </div>
        <div class="lib-nav-arrow top-left">‚Üì</div>
        <div class="lib-nav-arrow top-right">‚Üì</div>
        <div class="lib-nav-arrow bot-left">‚Üë</div>
        <div class="lib-nav-arrow bot-right">‚Üë</div>
    </div>

    <script>
	
		const CONFIG = {
			version: "v1.5.3",
            LINKS: {
                steamImg: "https://shared.fastly.steamstatic.com",
                steamRun: "steam://run/",
                placeholder: "https://i.pinimg.com/originals/fe/df/71/fedf7125acf620e856b6d09ef44eee51.gif"
            }
        };
	
		// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–µ—à–∏—Ä–æ–≤—â–∏–∫–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫
		if ('serviceWorker' in navigator) {
			const swCode = `
				const CACHE_NAME = 'steam-images-v1';
				self.addEventListener('fetch', (event) => {
					if (event.request.url.includes('steamstatic.com')) {
						event.respondWith(
							caches.open(CACHE_NAME).then((cache) => {
								return cache.match(event.request).then((response) => {
									return response || fetch(event.request).then((networkResponse) => {
										cache.put(event.request, networkResponse.clone());
										return networkResponse;
									});
								});
							})
						);
					}
				});
			`;
			const blob = new Blob([swCode], { type: 'text/javascript' });
			navigator.serviceWorker.register(URL.createObjectURL(blob));
		}

	
	
	
	
	
	
        let myGames = [], audioCtx = null, lastWonGame = null, lastGameId = null, idleTimer = null;
        let trashStreak = 0, sessionTrashCount = 0, clearClicks = 0;
        let totalSpins = parseInt(localStorage.getItem('stats_total_spins') || '0');
        let libraryOpens = parseInt(localStorage.getItem('stats_library_opens') || '0');
        let userAchievements = JSON.parse(localStorage.getItem('steam_roulette_achievements') || '{}');
		let gamesSinceClear = parseInt(localStorage.getItem('gamesSinceClear') || '0', 10);

        const ITEM_WIDTH = 260, WRAPPER_WIDTH = 850;
        const rarityWeights = { 
				trash: 30,          /* ‚Üê 100 */ 
				common: 50,         /* ‚Üê 100 */ 
				uncommon: 75,       /* ‚Üê 100 */ 
				rare: 65,           /* ‚Üê 100 */
				epic: 55,            /* ‚Üê 100 */
				legendary: 40,       /* ‚Üê 100 */ 
				mythic: 30,          /* ‚Üê 100 */
				godly: 10           /* ‚Üê 100 */
			};
			
			const hentaiKeywords = [
			'hentai',      // —É–∂–µ –±—ã–ª–æ
			'Sex',        // –ø—Ä–∏–º–µ—Ä—ã
			'Furry',
			'adult',
			'nsfw',
			'Titty',
			'Miss Neko',
			'Mirror',
			'My Cute',
			'XXX',
			'Anthro Heat',
			'Agony UNRATED',
			'Anomalous Coffee Machine',
			// –î–æ–±–∞–≤–ª—è–π—Ç–µ —Å—é–¥–∞ –ª—é–±—ã–µ —Å–ª–æ–≤–∞ ‚Äì –æ–Ω–∏ –±—É–¥—É—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
		];
		
		const hentaiRegexes = hentaiKeywords.map(keyword => {
		  // –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º —Å–ø–µ—Ü‚Äë—Å–∏–º–≤–æ–ª—ã, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –ª–æ–º–∞–ª–∏ regex
		  const escaped = keyword.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
		  // \b ‚Äì –≥—Ä–∞–Ω–∏—Ü–∞ —Å–ª–æ–≤–∞ (–æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü —Å–ª–æ–≤–∞).  
		  // –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–æ—á–Ω–æ –º–∞—Ç—á–∏—Ç—å "hentai" –≤ "hentai world" –∏ –Ω–µ "hentaiworld".
		  return new RegExp(`\\b${escaped}\\b`, 'i');  // i ‚Äì –±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞
		});		
					

        const achievements = {
            first_spin: { title: "–ü–µ—Ä–≤—ã–π –ø–æ—à–µ–ª!", desc: "–°–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É", icon: "‚òù" },
            mythic_drop: { title: "–ü–æ–≤–µ–∑–ª–æ-–ü–æ–≤–µ–∑–ª–æ", desc: "–í—ã–±–∏—Ç—å –º–∏—Ñ–∏—á–µ—Å–∫—É—é –∏–≥—Ä—É", icon: "üé≤" },
            trash_collector: { title: "–ú—É—Å–æ—Ä—â–∏–∫", desc: "–í—ã–±–∏—Ç—å 5 '–º—É—Å–æ—Ä–Ω—ã—Ö' –∏–≥—Ä –ø–æ–¥—Ä—è–¥", icon: "üóëÔ∏è" },
            librarian: { title: "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—å", desc: "–ó–∞–≥—Ä—É–∑–∏—Ç—å JSON, –≤ –∫–æ—Ç–æ—Ä–æ–º –±–æ–ª–µ–µ 100 –∏–≥—Ä", icon: "üìö" },
            night_walker: { title: "–ó–∞–≤—Ö–æ–∑", desc: "–ó–∞–≥–ª—è–Ω—É—Ç—å –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É 10 —Ä–∞–∑", icon: "üóùÔ∏è" },
            close_call: { title: "–ù–∞ —Ç–æ–Ω–µ–Ω—å–∫–æ–≥–æ", desc: "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ —Å–∞–º–æ–º –∫—Ä–∞—é –∫–∞—Ä—Ç–æ—á–∫–∏", icon: "üìè" },
            ludoman: { title: "–õ—É–¥–æ–º–∞–Ω", desc: "–°–¥–µ–ª–∞—Ç—å 100 –∫—Ä—É—Ç–æ–∫", icon: "üé∞" },
            dodep: { title: "–î–æ–¥–µ–ø", desc: "–í—ã –∑–∞—à–ª–∏ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ (200 –∫—Ä—É—Ç–æ–∫)", icon: "üí∏" },
            patient: { title: "–¢–µ—Ä–ø–µ–ª–∏–≤—ã–π", desc: "–ü—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 10 –º–∏–Ω—É—Ç –±–µ–∑ –∫—Ä—É—Ç–æ–∫", icon: "üßò" },
            night_shift: { title: "–ù–æ—á–Ω–∞—è —Å–º–µ–Ω–∞", desc: "–ö—Ä—É—Ç–∫–∞ –≤ –ø–µ—Ä–∏–æ–¥ —Å 00:00 –¥–æ 05:00", icon: "üåô" },
            denial: { title: "–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ", desc: "5 —Ä–∞–∑ –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é", icon: "üßπ" },
            grey_days: { title: "–°–µ—Ä—ã–µ –±—É–¥–Ω–∏", desc: "10 Trash-–∏–≥—Ä –∑–∞ —Å–µ—Å—Å–∏—é", icon: "üå´Ô∏è" },
            quality_control: { title: "–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞", desc: "–ü—Ä–æ–ª–∏—Å—Ç–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–æ —Å–∞–º–æ–≥–æ –Ω–∏–∑–∞", icon: "üìë" },
            no_hentai: { title: "–í–∞–º –µ—Å—Ç—å 18 ?", desc: "–í—ã –∑–∞–≥—Ä—É–∑–∏–ª–∏ –ø–æ—Ä–Ω–æ –∏–≥—Ä—É", icon: "üîû" },
            epicenter: { title: "–≠–ø–∏—Ü–µ–Ω—Ç—Ä", desc: "–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–æ–≤–Ω–æ –ø–æ —Ü–µ–Ω—Ç—Ä—É", icon: "üéØ" },
            stability: { title: "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å", desc: "–í—ã–±–∏—Ç—å –æ–¥–Ω—É –∏–≥—Ä—É –¥–≤–∞–∂–¥—ã –ø–æ–¥—Ä—è–¥", icon: "üîÑ" },
			godly_drop: { title: "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –±—Ä–æ—Å–æ–∫", desc: "–í—ã–±–∏—Ç—å –∏–≥—Ä—É —É—Ä–æ–≤–Ω—è '–î–∞—Ä‚ÄØ–ë–æ–≥–æ–≤'", icon: "‚ö°" },
			early_bird: { title: "–†–∞–Ω–Ω—è—è –ø—Ç–∞—à–∫–∞",desc: "–°–¥–µ–ª–∞—Ç—å –∫—Ä—É—Ç–∫—É —Å 05:00 –¥–æ 09:00", icon: "‚òï" },
			hoarder: { title: "–ü–ª—é—à–∫–∏–Ω",desc: "–ù–∞–∫–æ–ø–∏—Ç—å 50 –∏–≥—Ä –≤ –∏—Å—Ç–æ—Ä–∏–∏, –Ω–µ –æ—á–∏—â–∞—è –µ—ë", icon: "üì¶" },
			no_choice: { title: "–ë–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤", desc: "–ó–∞–≥—Ä—É–∑–∏—Ç—å JSON, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—Å–µ–≥–æ 1 –∏–≥—Ä–∞", icon: "ü§°" },
			minimalist: { title: "–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç", desc: "–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é, –∫–æ–≥–¥–∞ –≤ –Ω–µ–π –±—ã–ª–∞ –≤—Å–µ–≥–æ 1 –∏–≥—Ä–∞", icon: "ü§è" }
        };
        /* --- –î–í–ò–ñ–û–ö –ñ–ò–í–û–ì–û –§–û–ù–ê --- */
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let particleSpeedMult = 1;

        function initP() {
            canvas.width = window.innerWidth; 
            canvas.height = window.innerHeight;
            particles = Array(120).fill().map(() => ({ 
                x: Math.random() * canvas.width, 
                y: Math.random() * canvas.height, 
                sX: Math.random() - 0.5, 
                sY: Math.random() - 0.5, 
                op: Math.random() * 0.5 + 0.1 
            }));
        }

        function animP() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "rgba(102, 192, 244, 0.4)";
            particles.forEach(p => {
                p.x += p.sX * particleSpeedMult; 
                p.y += p.sY * particleSpeedMult;
                if(p.x < 0) p.x = canvas.width; if(p.x > canvas.width) p.x = 0;
                if(p.y < 0) p.y = canvas.height; if(p.y > canvas.height) p.y = 0;
                ctx.globalAlpha = p.op; 
                ctx.beginPath(); ctx.arc(p.x, p.y, 1.5, 0, Math.PI * 2); ctx.fill();
            });
            requestAnimationFrame(animP);
        }
        window.addEventListener('resize', initP);
        initP(); animP();

        /* --- –°–ò–°–¢–ï–ú–ù–´–ï –§–£–ù–ö–¶–ò–ò –î–û–°–¢–ò–ñ–ï–ù–ò–ô --- */
        function unlockAchievement(id) {
            if (userAchievements[id]) return;
            userAchievements[id] = new Date().toLocaleDateString();
            localStorage.setItem('steam_roulette_achievements', JSON.stringify(userAchievements));
            showAchievementPopup(achievements[id]);
        }

        function showAchievementPopup(ach) {
            const popup = document.createElement('div');
            popup.style.cssText = `position: fixed; bottom: 20px; right: 20px; background: #2a475e; border-left: 5px solid #66c0f4; padding: 15px; border-radius: 4px; display: flex; align-items: center; gap: 15px; z-index: 2000; animation: slideIn 0.5s ease-out; box-shadow: 0 5px 15px rgba(0,0,0,0.5);`;
            popup.innerHTML = `<div style="font-size: 30px;">${ach.icon}</div><div><div style="color: #66c0f4; font-weight: bold; font-size: 14px;">–î–û–°–¢–ò–ñ–ï–ù–ò–ï –ü–û–õ–£–ß–ï–ù–û</div><div style="color: white; font-size: 16px;">${ach.title}</div></div>`;
            document.body.appendChild(popup);
            setTimeout(() => {
                popup.style.animation = 'slideOut 0.5s ease-in forwards';
                setTimeout(() => popup.remove(), 500);
            }, 4000);
        }

		function containsKeyword(text) {
			  if (!text) return false;
			  return hentaiRegexes.some(regex => regex.test(text));
			}



        function resetIdleTimer() {
            if (idleTimer) clearTimeout(idleTimer);
            idleTimer = setTimeout(() => unlockAchievement('patient'), 600000);
        }
        resetIdleTimer();

        /* --- –û–ë–†–ê–ë–û–¢–ö–ê –ó–ê–ì–†–£–ó–ö–ò --- */
        function handleManualUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
			try {
				const data = JSON.parse(e.target.result);
				myGames = data.filter(item => item.id);

				/* ---------- NEW BEGIN ---------- */
				// 1) –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
				const fileNameHasKeyword = containsKeyword(file.name);
				const gameHasKeyword = myGames.some(g =>
					containsKeyword(g.name) ||
					containsKeyword(g.desc) ||
					containsKeyword(g.info)  // –µ—Å–ª–∏ —É –∏–≥—Ä—ã –µ—Å—Ç—å –ø–æ–ª–µ info
				);

				// 3) –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —É—Å–ª–æ–≤–∏–µ –∏—Å—Ç–∏–Ω–Ω–æ ‚Äì —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
				if (fileNameHasKeyword || gameHasKeyword) {
					unlockAchievement('no_hentai');
				}
				/* ---------- NEW END ---------- */

				finalizeDataLoad("–°–ø–∏—Å–æ–∫ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!");
			} catch (err) {
				alert("–û—à–∏–±–∫–∞ JSON");
			}
		};
            reader.readAsText(file);
        }

        function finalizeDataLoad(msg) {
            document.getElementById('winner-display').textContent = msg;
            document.getElementById('spin-btn').disabled = false;
            updateStats();
            if (myGames.length >= 100) unlockAchievement('librarian');
			if (myGames.length === 1) unlockAchievement('no_choice');
            const track = document.getElementById('track');
            track.innerHTML = '';
            for (let i = 0; i < 12; i++) {
                const game = weightedRandom();
                if (game) track.appendChild(createNode(game)).classList.add('item-animate');
            }
            document.getElementById('lib-btn').style.display = 'block';
            document.getElementById('ach-btn').style.display = 'block';
            document.getElementById('lib-count').textContent = myGames.length;
            document.getElementById('upload-btn').style.display = 'none';
        }
        /* --- –†–ê–ù–î–û–ú –ù–ê –û–°–ù–û–í–ï –¶–í–ï–¢–ê --- */
        function weightedRandom() {
            if (myGames.length === 0) return null;
            const totalWeight = myGames.reduce((sum, g) => sum + rarityWeights[g.color], 0);
            let random = Math.random() * totalWeight;
            for (const game of myGames) {
                const weight = rarityWeights[game.color];
                if (random < weight) return game;
                random -= weight;
            }
        }

        /* --- –°–û–ó–î–ê–ù–ò–ï –ö–ê–†–¢–û–ß–ö–ò --- */
        function createNode(game) {
            if (!game) return document.createElement('div');
            const div = document.createElement('div');
            div.className = `item ${game.color}`;
            const imgUrl = `${CONFIG.LINKS.steamImg}/store_item_assets/steam/apps/${game.id}/header.jpg`;
            div.innerHTML = `
                <img src="${imgUrl}" 
                     loading="lazy" 
                     onerror="this.onerror=null; this.src='${CONFIG.LINKS.placeholder}';">
            `;
            return div;
        }

        /* --- –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–¢–ê–¢–ò–°–¢–ò–ö–ò --- */
        function updateStats() {
            const totalWeight = myGames.reduce((sum, g) => sum + rarityWeights[g.color], 0);
            const statsBox = document.getElementById('chance-stats');
            statsBox.innerHTML = ''; 
            document.getElementById('game-count').textContent = myGames.length;

            const labels = { 
				trash: "–ú—É—Å–æ—Ä", 
				common: "–û–±—ã—á–Ω—ã–µ", 
				uncommon: "–ù–µ–æ–±—ã—á–Ω—ã–µ", 
				rare: "–†–µ–¥–∫–∏–µ", 
				epic: "–≠–ø–∏—á–µ—Å–∫–∏–µ", 
				legendary: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ", 
				mythic: "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–µ",
				godly: "–î–∞—Ä‚ÄØ–ë–æ–≥–æ–≤"      /* ‚Üê NEW */
			};
            const colors = { 
				trash: '#4b4b4b', 
				common: '#ffffff', 
				uncommon: '#32cd32', 
				rare: '#4b69ff', 
				epic: '#8847ff', 
				legendary: '#caab05', 
				mythic: '#eb4b4b',
				godly: '#40e0d0'       /* ‚Üê NEW */
			};

            Object.keys(rarityWeights).forEach(rarity => {
                const count = myGames.filter(g => g.color === rarity).length;
                const chance = count > 0 ? ((count * rarityWeights[rarity] / totalWeight) * 100).toFixed(2) : 0;
                const div = document.createElement('div');
                div.className = 'stat-line';
                div.innerHTML = `<span style="color:${colors[rarity]}">${labels[rarity]}:</span> <b>${chance}%</b> <span style="font-size:11px; opacity:0.6;">(${count} —à—Ç.)</span>`;
                statsBox.appendChild(div);
            });
        }

        /* --- WEB AUDIO API (–ó–í–£–ö–ò) --- */
        function playTick() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(120, audioCtx.currentTime); 
            osc.frequency.exponentialRampToValueAtTime(40, audioCtx.currentTime + 0.1); 
            gain.gain.setValueAtTime(0.04, audioCtx.currentTime); 
            gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.1); 
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.12);
        }

        function playVictorySound() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            audioCtx.resume().then(() => {
                const notes = [261.63, 329.63, 392.00, 523.25];
                const now = audioCtx.currentTime;
                notes.forEach((f, i) => {
                    const osc = audioCtx.createOscillator();
                    const gain = audioCtx.createGain();
                    osc.type = 'triangle';
                    osc.frequency.setValueAtTime(f, now + (i * 0.1));
                    gain.gain.setValueAtTime(0, now + (i * 0.1));
                    gain.gain.linearRampToValueAtTime(0.1, now + (i * 0.1) + 0.05); 
                    gain.gain.exponentialRampToValueAtTime(0.001, now + (i * 0.1) + 0.5);
                    osc.connect(gain); gain.connect(audioCtx.destination);
                    osc.start(now + (i * 0.1)); osc.stop(now + (i * 0.1) + 0.6);
                });
            });
        }
		
		function addGameToHistory(game) {
			// –î–æ–±–∞–≤–ª—è–µ–º –∏–≥—Ä—É –≤ –º–∞—Å—Å–∏–≤‚Äë–∏—Å—Ç–æ—Ä–∏—é
			
			gamesSinceClear++;                           // –≤ –ø–∞–º—è—Ç–∏
			localStorage.setItem('gamesSinceClear', String(gamesSinceClear)); // —Å–æ—Ö—Ä–∞–Ω—è–µ–º

			// –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ ¬´–ü–ª—é—à–∫–∏–Ω¬ª
			if (gamesSinceClear >= 50 && !userAchievements['hoarder']) {
				unlockAchievement('hoarder');
			}
		}
		
		
		
		
		
        /* --- –õ–û–ì–ò–ö–ê –†–£–õ–ï–¢–ö–ò --- */
        function spin() {
            resetIdleTimer();
            if (myGames.length === 0) return;
            const hour = new Date().getHours();
			console.log('–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è (–ª–æ–∫–∞–ª—å–Ω—ã–π —á–∞—Å):', hour);
            if (hour >= 0 && hour <= 5) unlockAchievement('night_shift');
			if (hour >= 5 && hour < 9) unlockAchievement('early_bird');
            if (audioCtx && audioCtx.state === 'suspended') audioCtx.resume();
			
            
            const spinTime = 12, winIdx = 100;
            document.getElementById('spin-btn').disabled = true;
            document.getElementById('launch-btn').style.display = 'none';
            document.getElementById('winner-display').textContent = "–í–´–ë–û–†...";

            const track = document.getElementById('track');
            track.style.transition = 'none';
            track.style.transform = 'translateX(0)';
            track.innerHTML = '';

            const spinData = [];
            for (let i = 0; i < winIdx + 15; i++) spinData.push(weightedRandom());
            lastWonGame = spinData[winIdx];
			addGameToHistory(lastWonGame);

            const fragment = document.createDocumentFragment();
            spinData.forEach(game => fragment.appendChild(createNode(game)));
            track.appendChild(fragment);

            const basePos = (winIdx * ITEM_WIDTH) - (WRAPPER_WIDTH / 2) + (ITEM_WIDTH / 2) + 5;
            const randomOffset = Math.floor(Math.random() * 250) - 125;
            const finalPos = Math.floor(basePos + randomOffset);

            let lastTickIdx = -1;
            const startTime = Date.now();
            const centerLine = document.getElementById('roulette-box').getBoundingClientRect().left + (WRAPPER_WIDTH / 2);



        function updateTicks() {
            const elapsed = (Date.now() - startTime) / 1000;
            if (elapsed > spinTime + 0.2) return;
            const items = track.getElementsByClassName('item');
            for (let i = 0; i < items.length; i++) {
                const rect = items[i].getBoundingClientRect();
                if (centerLine >= rect.left && centerLine <= rect.right) {
                    if (i !== lastTickIdx) { playTick(); lastTickIdx = i; }
                    break;
                }
            }
                requestAnimationFrame(updateTicks);
        }

            setTimeout(() => {
                track.style.transition = `transform ${spinTime}s cubic-bezier(0.1, 0, 0, 1)`;
                track.style.transform = `translateX(-${finalPos}px)`;
                requestAnimationFrame(updateTicks);
            }, 50);

            setTimeout(() => {
                document.getElementById('winner-display').textContent = lastWonGame.name.toUpperCase();
                const winner = track.getElementsByClassName('item')[winIdx];
                if (winner) {
                    winner.classList.add('won');
                    const colors = { 
						trash: '#4b4b4b', 
						common: '#ffffff', 
						uncommon: '#32cd32', 
						rare: '#4b69ff', 
						epic: '#8847ff', 
						legendary: '#caab05', 
						mythic: '#eb4b4b',
						godly: '#40e0d0'       /* ‚Üê NEW */
					};
                    winner.style.boxShadow = `0 0 40px ${colors[lastWonGame.color]}`;
                }
                if (Math.abs(randomOffset) < 5) unlockAchievement('epicenter');
                if (Math.abs(randomOffset) > 120) unlockAchievement('close_call');
                if (lastWonGame.id === lastGameId) unlockAchievement('stability');
                lastGameId = lastWonGame.id;
                unlockAchievement('first_spin');
                if (lastWonGame.color === 'mythic') unlockAchievement('mythic_drop');
				if (lastWonGame.color === 'godly') unlockAchievement('godly_drop');
                saveResult(lastWonGame);
                playVictorySound();
                document.getElementById('spin-btn').disabled = false;
                document.getElementById('launch-btn').style.display = 'block';
            }, spinTime * 1000 + 200);
        }

        function saveResult(game) {
            const h = JSON.parse(localStorage.getItem('rouletteHistory') || '[]');
            h.push({ name: game.name, color: game.color });
            localStorage.setItem('rouletteHistory', JSON.stringify(h));
            if (game.color === 'trash') {
                trashStreak++; sessionTrashCount++;
                if (trashStreak >= 5) unlockAchievement('trash_collector');
                if (sessionTrashCount >= 10) unlockAchievement('grey_days');
            } else trashStreak = 0;
            totalSpins++; localStorage.setItem('stats_total_spins', totalSpins);
            if (totalSpins >= 100) unlockAchievement('ludoman');
            if (totalSpins >= 200) unlockAchievement('dodep');
            addHistoryUI(game);
        }

                function toggleLibrary(show) {
            const el = document.getElementById('library-overlay');
            el.style.display = show ? 'block' : 'none';
            
            if (show) {
                // –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                document.body.style.overflow = 'hidden';
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–∫—Ä–æ–ª–ª –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ –Ω–∞—á–∞–ª–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
                el.scrollTop = 0;

                // –õ–æ–≥–∏–∫–∞ –∞—á–∏–≤–∫–∏ "–ó–∞–≤—Ö–æ–∑"
                libraryOpens++; 
                localStorage.setItem('stats_library_opens', libraryOpens);
                if (libraryOpens >= 10) unlockAchievement('night_walker');
                
                renderLibrary();

                // –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–¢–†–ï–õ–ö–ê–ú–ò –ò –ê–ß–ò–í–ö–û–ô –ü–†–ò –°–ö–†–û–õ–õ–ï
                el.onscroll = () => {
                    const scrollPos = el.scrollTop;
                    const maxScroll = el.scrollHeight - el.clientHeight;

                    // –í–µ—Ä—Ö–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∏ (‚Üì) –∑–∞—Ç—É—Ö–∞—é—Ç –ø—Ä–∏ –Ω–∞—á–∞–ª–µ —Å–∫—Ä–æ–ª–ª–∞
                    document.querySelectorAll('.top-left, .top-right').forEach(arrow => {
                        arrow.style.opacity = scrollPos > 50 ? '0' : '0.4';
                    });

                    // –ù–∏–∂–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∏ (‚Üë) –ø–æ—è–≤–ª—è—é—Ç—Å—è, –∫–æ–≥–¥–∞ –º—ã –æ—Ç–æ—à–ª–∏ –æ—Ç –≤–µ—Ä—Ö–∞
                    document.querySelectorAll('.bot-left, .bot-right').forEach(arrow => {
                        arrow.style.opacity = scrollPos > 100 ? '0.4' : '0';
                    });

                    // –ê—á–∏–≤–∫–∞ "–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞"
                    if (scrollPos >= maxScroll - 15 && myGames.length > 20) {
                        unlockAchievement('quality_control');
                    }
                };
            } else {
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä–æ–ª–ª –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
                document.body.style.overflow = ''; 
            }
        }

		
		

        function renderLibrary() {
            const grid = document.getElementById('library-grid'); 
            grid.innerHTML = '';
            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –º–∏—Ñ–∏—á–µ—Å–∫–∏–µ –≤ –Ω–∞—á–∞–ª–µ, –º—É—Å–æ—Ä –≤ –∫–æ–Ω—Ü–µ
            const order = { mythic: 1, legendary: 2, epic: 3, rare: 4, uncommon: 5, common: 6, trash: 7, godly: 8 };
            const sorted = [...myGames].sort((a, b) => (order[a.color] || 99) - (order[b.color] || 99));

            sorted.forEach(game => {
                const div = document.createElement('div'); 
                div.className = `lib-card ${game.color}`;
                const imgUrl = `${CONFIG.LINKS.steamImg}/store_item_assets/steam/apps/${game.id}/header.jpg`;
                
                div.innerHTML = `
                    <img src="${imgUrl}" 
                         loading="lazy" 
                         onerror="this.onerror=null; this.src='${CONFIG.LINKS.placeholder}';">
                `;
                
                div.onclick = () => { 
                    if(confirm(`–ó–ê–ü–£–°–¢–ò–¢–¨ ${game.name}?`)) window.location.href = `${CONFIG.LINKS.steamRun}${game.id}`; 
                };
                grid.appendChild(div);
            });
        }


		function fullReset() {
			if (confirm('–í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –æ–±–Ω—É–ª–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
				// –û—á–∏—â–∞–µ–º –∫–ª—é—á–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
				localStorage.removeItem('steam_roulette_achievements');
				localStorage.removeItem('stats_library_opens');
				localStorage.removeItem('stats_total_spins');
				
				// –û–±–Ω—É–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
				userAchievements = {};
				libraryOpens = 0;
				totalSpins = 0;
				
				alert('–î–∞–Ω–Ω—ã–µ —Å—Ç–µ—Ä—Ç—ã. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–∞.');
				location.reload();
			}
		}









        function toggleAchievements(show) { document.getElementById('achievements-overlay').style.display = show ? 'block' : 'none'; 
		// –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã
		document.body.style.overflow = show ? 'hidden' : '';
		if (show) renderAchievements(); }
		function renderAchievements() {
			const grid = document.getElementById('achievements-grid'); 
			grid.innerHTML = '';
			let count = 0;

			Object.keys(achievements).forEach(id => {
				const ach = achievements[id];
				const isUnlocked = !!userAchievements[id]; // –ü—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å—Ç—å –ª–∏ –¥–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è
				if (isUnlocked) count++;

				const div = document.createElement('div');
				div.className = `ach-card ${isUnlocked ? 'unlocked' : ''}`;
				
				div.innerHTML = `
					<div class="ach-icon">${ach.icon}</div>
					<div class="ach-title">${ach.title}</div>
					<div class="ach-desc">${isUnlocked ? ach.desc : '???'}</div>
					${isUnlocked ? '<div class="ach-date" style="color: #caab05; font-size: 10px; margin-top: 10px; font-style: italic;">–ü–æ–ª—É—á–µ–Ω–æ: ' + userAchievements[id] + '</div>' : ''}
				`;

				grid.appendChild(div);
				});
			document.getElementById('ach-count').textContent = count;
		}
	
			function addHistoryUI(g) {
				const li = document.createElement('li'); 
				li.className = 'history-item';
				const colors = { 
					trash: '#4b4b4b', 
					common: '#ffffff', 
					uncommon: '#32cd32', 
					rare: '#4b69ff', 
					epic: '#8847ff', 
					legendary: '#caab05', 
					mythic: '#eb4b4b',
					godly: '#40e0d0'       /* ‚Üê NEW */
				};
		// –î–æ–±–∞–≤–∏–º –∑–∞—â–∏—Ç—É: –µ—Å–ª–∏ —Ü–≤–µ—Ç–∞ –Ω–µ—Ç, –±—É–¥–µ—Ç —Å–µ—Ä—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
		li.style.borderColor = colors[g.color] || '#555555';
		li.textContent = g.name; 
		document.getElementById('history-list').appendChild(li);
	}


		function clearHistory() {
			if (confirm('–û—á–∏—Å—Ç–∏—Ç—å?')) {
				/* ---------- NEW BEGIN ---------- */
				// –°—á–∏—Ç—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –∏–∑ localStorage
				const history = JSON.parse(localStorage.getItem('rouletteHistory') || '[]');
				// –ï—Å–ª–∏ –¥–æ –æ—á–∏—Å—Ç–∫–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–æ–≤–Ω–æ –æ–¥–Ω–∞ –∏–≥—Ä–∞ ‚Äì —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∞—á–∏–≤–∫—É
				if (history.length === 1) {
					unlockAchievement('minimalist');
				}
				/* ---------- NEW END ---------- */

				// –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ
				localStorage.removeItem('rouletteHistory');
				document.getElementById('history-list').innerHTML = '';
				clearClicks++;

				// 5‚Äë–π —Ä–∞–∑ –æ—á–∏—Å—Ç–∫–∞ ‚Üí ¬´–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ¬ª
				if (clearClicks >= 5) unlockAchievement('denial');

				// –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ ¬´—Å—á–∏—Ç–∞–µ–º¬ª –∏–≥—Ä —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ—á–∏—Å—Ç–∫–∏
				gamesSinceClear = 0;
				localStorage.setItem('gamesSinceClear', '0');
			}
		}

        function launchGame() {
		// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–≥—Ä–∞ –±—ã–ª–∞ –≤—ã–±—Ä–∞–Ω–∞ –∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
			if (lastWonGame) {
			if (confirm(`–ó–ê–ü–£–°–¢–ò–¢–¨ ${lastWonGame.name}?`)) {
				window.location.href = `${CONFIG.LINKS.steamRun}${game.id}`;
			}
				} else {
			alert("–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —Ä—É–ª–µ—Ç–∫—É!");
		}
	}

        window.onload = () => { 
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–µ—Ä—Å–∏—é –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –≤ –Ω–∞—à —è—Ä–ª—ã–∫
    const versionDisplay = document.getElementById('app-version');
    if (versionDisplay) versionDisplay.textContent = CONFIG.version;

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é
    const saved = JSON.parse(localStorage.getItem('rouletteHistory') || '[]'); 
    saved.forEach(g => addHistoryUI(g)); 
};

    </script>
</body>
</html>
